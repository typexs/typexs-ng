<div class="free-query-input">
  <div class="form-group">
    <label for="textarea-entity-query" class="txs-title">Query:</label>
    <textarea id="textarea-entity-query" class="query-input"
              rows="1" cols="128"
              placeholder=" insert query string ... "
              [(ngModel)]="freeTextQuery"
              (ngModelChange)="onQueryInput($event)"></textarea>
    <div class="query-view-toggle"
         (click)="enabled = !enabled">
      <i class="icon"
         [ngClass]="{'icon-eye':enabled, 'icon-eye-slash':!enabled}"></i>
    </div>
  </div>
  <div *ngIf="freeTextQueryError.length > 0">
    <ul class="list-group">
      <li *ngFor="let error of freeTextQueryError" class="list-group-item list-group-item-warning">{{error}}</li>
    </ul>
  </div>

  <div *ngIf="jsonQuery && enabled" class="alert alert-success">
    <div class="row">
      <div class="col-md-6">
        <p class="txs-title">Mango-JSON</p>
        <pre>{{jsonQuery.toJson ? jsonQuery.toJson() : jsonQuery | json}}</pre>
      </div>
    </div>
  </div>


  <div class="btn-group" *ngIf="jsonQuery && freeTextQueryError.length === 0">
    <button class="btn btn-info" (click)="doQuery()">Execute query</button>
    <button class="btn btn-warning" (click)="doResetQuery()">Reset query</button>
  </div>
</div>
