{"version":3,"file":"typexs-ng-base.umd.js.map","sources":["node_modules/tslib/tslib.es6.js","ng://@typexs-ng/base/modules/navigator/NavEntry.ts","ng://@typexs-ng/base/modules/navigator/navigator.component.ts","ng://@typexs-ng/base/modules/navigator/navigator.module.ts","ng://@typexs-ng/base/libs/xsform/ResolveDataValue.ts","ng://@typexs-ng/base/libs/xsview/TreeObject.ts","ng://@typexs-ng/base/libs/xsform/FormObject.ts","ng://@typexs-ng/base/libs/exceptions/NoFormHandlerDefinedForTypeError.ts","ng://@typexs-ng/base/libs/xsview/ContentComponentRegistry.ts","ng://@typexs-ng/base/libs/xsview/decorators/ViewContent.ts","ng://@typexs-ng/base/libs/xsform/elements/Tabs.ts","ng://@typexs-ng/base/libs/xsform/elements/Tab.ts","ng://@typexs-ng/base/libs/xsform/elements/Ref.ts","ng://@typexs-ng/base/libs/xsform/elements/Input.ts","ng://@typexs-ng/base/libs/xsform/elements/Form.ts","ng://@typexs-ng/base/libs/xsform/elements/Checkbox.ts","ng://@typexs-ng/base/libs/xsform/elements/Radio.ts","ng://@typexs-ng/base/libs/xsform/elements/Select.ts","ng://@typexs-ng/base/libs/xsform/elements/Grid.ts","ng://@typexs-ng/base/libs/exceptions/NoFormTypeDefinedError.ts","ng://@typexs-ng/base/libs/xsform/FormBuilder.ts","ng://@typexs-ng/base/modules/xsform/form.service.ts","ng://@typexs-ng/base/libs/xsview/decorators/ViewComponent.ts","ng://@typexs-ng/base/libs/xsview/AbstractComponent.ts","ng://@typexs-ng/base/libs/xsview/Context.ts","ng://@typexs-ng/base/libs/xsform/AbstractFormComponent.ts","ng://@typexs-ng/base/modules/xsform/form.component.ts","ng://@typexs-ng/base/modules/xsform/input.component.ts","ng://@typexs-ng/base/modules/xsform/checkbox.component.ts","ng://@typexs-ng/base/modules/xsform/radio.component.ts","ng://@typexs-ng/base/modules/xsform/select.component.ts","ng://@typexs-ng/base/modules/xsform/grid-cell.component.ts","ng://@typexs-ng/base/modules/xsform/grid-row.component.ts","ng://@typexs-ng/base/modules/xsform/grid.component.ts","ng://@typexs-ng/base/modules/xsform/xforms.elements.ts","ng://@typexs-ng/base/modules/xsform/xforms.module.ts","ng://@typexs-ng/base/modules/xsview/view-builder.component.ts","ng://@typexs-ng/base/modules/xsview/xviews.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; }; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator];\r\n    return m ? m.call(o) : typeof __values === \"function\" ? __values(o) : o[Symbol.iterator]();\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export class NavEntry {\n  path: string;\n  label: string;\n}\n","import {Component} from '@angular/core';\nimport {Router} from \"@angular/router\";\n\nimport {NavEntry} from \"./NavEntry\";\n\n@Component({\n  selector: 'nav-root',\n  templateUrl: './navigator.component.html',\n})\nexport class NavigatorComponent {\n\n  routes: NavEntry[] = []\n\n  constructor(router: Router) {\n\n    for (let route of router.config) {\n      let entry = new NavEntry();\n      entry.label = route.data.label;\n      entry.path = route.path;\n      this.routes.push(entry);\n    }\n    // console.log(this.routes)\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {BrowserModule} from '@angular/platform-browser';\nimport {NavigatorComponent} from \"./navigator.component\";\nimport {RouterModule} from \"@angular/router\";\n\n\n@NgModule({\n  declarations: [NavigatorComponent],\n  imports: [BrowserModule,RouterModule],\n  exports:[NavigatorComponent],\n  providers: []\n})\nexport class NavigatorModule {\n\n\n\n\n}\n","import {FormObject} from './FormObject';\nimport {Form} from './elements/Form';\nimport {IResolver} from './IResolver';\n\nexport class ResolveDataValue implements IResolver {\n\n  private orgValue: string;\n\n  private path: string[] = [];\n\n  private fetchKey: string = null;\n\n  private property: string = null;\n\n  private object: FormObject = null;\n\n  constructor(value: string, object: FormObject, property: string) {\n    this.property = property;\n    this.object = object;\n    this.orgValue = value.replace(/^\\$/, '');\n    this.path = this.orgValue.split('.');\n    this.fetchKey = this.path.pop();\n  }\n\n  get() {\n    return this.orgValue;\n  }\n\n\n  resolve(form: Form) {\n    let elem = form.get(this.path.join('.'));\n    if (elem) {\n      this.object[this.property] = elem[this.fetchKey];\n      return elem[this.fetchKey];\n    } else {\n      throw new Error('cant resolve data');\n    }\n\n  }\n\n}\n\n","import {Context} from './Context';\n\n\nexport abstract class TreeObject {\n\n  readonly type: string;\n\n  context: Context;\n\n  index: number;\n\n  parent: TreeObject = null;\n\n  children: TreeObject[] = [];\n\n  insert(object: TreeObject) {\n    object.parent = this;\n    object.index = this.children.length;\n    this.children.push(object);\n  }\n\n  getParent(): TreeObject {\n    return this.parent;\n  }\n\n  setParent(parent: TreeObject) {\n    if (parent) {\n      this.parent = parent;\n      this.index = this.parent.children.indexOf(this);\n    }\n  }\n\n  getChildren() {\n    return this.children;\n  }\n}\n","import {PropertyDef} from 'typexs-schema/libs/PropertyDef';\n\nimport * as _ from '../../libs/LoDash';\nimport {ResolveDataValue} from './ResolveDataValue';\nimport {TreeObject} from '../xsview/TreeObject';\n\n\nexport function isFormObject(obj: TreeObject | FormObject): obj is FormObject {\n  return obj instanceof FormObject;\n}\n\nexport abstract class FormObject extends TreeObject {\n\n  id: string;\n\n  usedKeys: string[] = [];\n\n  name: string;\n\n  label: string;\n\n  help: string;\n\n  readonly: false;\n\n  private binding: PropertyDef = null;\n\n\n  getBinding() {\n    return this.binding;\n  }\n\n\n\n  getUsedKeys() {\n    return this.usedKeys;\n  }\n\n\n\n  getPath(): string {\n    let arr = [];\n\n    if (this.getBinding() instanceof PropertyDef) {\n      if (this.getParent()) {\n        const parent = this.getParent();\n        if(isFormObject(parent)){\n          arr.push(parent.getPath());\n        }else{\n         //  throw new Error('parent is not a form object');\n        }\n      }\n      arr.push(this.name);\n      if (this.getBinding().isCollection()) {\n        arr.push('$idx');\n      }\n    }\n    return _.filter(arr, (x: string) => x.trim() != '').join('.');\n  }\n\n\n  getForm(): FormObject {\n    if (this.parent && isFormObject(this.parent)) {\n      return this.parent.getForm();\n    } else if (this.type == 'form') {\n      return this;\n    } else {\n      // TODO throw error this should never happen\n      return null;\n    }\n  }\n\n  handle(key: string, value: any) {\n\n    if (value instanceof ResolveDataValue) {\n      let form = this.getForm(); //\n      form['resolver'].push(value);\n    }\n\n    this.usedKeys.push(key);\n    let methodName = 'handle' + _.capitalize(key);\n    if (this[methodName]) {\n      this[methodName](value);\n    } else {\n      this[key] = value;\n    }\n  }\n\n  /**\n   * Don't override type\n   */\n  handleType(value: string) {\n  }\n\n\n  postProcess() {\n  }\n\n\n  replace(someObject: FormObject) {\n    let parent = this.getParent();\n    let idx = parent.getChildren().indexOf(this);\n    if (idx < 0) {\n      throw new Error('can not find index, something is wrong');\n    }\n    parent.getChildren()[idx] = someObject;\n    someObject.setParent(parent);\n    return someObject;\n  }\n}\n","export class NoFormHandlerDefinedForTypeError extends Error {\n  constructor(typeName: string) {\n    super(typeName + ' not defined');\n  }\n}\n","import {NoFormHandlerDefinedForTypeError} from './../../libs/exceptions/NoFormHandlerDefinedForTypeError';\nimport {IElementDef} from './IElementDef';\nimport * as _ from '../../libs/LoDash';\n\nexport class ContentComponentRegistry {\n\n  private static $self: ContentComponentRegistry = null;\n\n  private formHandler: IElementDef[] = [];\n\n  private constructor() {\n  }\n\n  static $(): ContentComponentRegistry {\n    if (!this.$self) {\n      this.$self = new ContentComponentRegistry();\n    }\n    return this.$self;\n  }\n\n  getOrCreateDef(typeName: string): IElementDef {\n    let exists = _.find(this.formHandler, {type: typeName});\n    if (!exists) {\n      exists = {type: typeName};\n      this.formHandler.push(exists);\n    }\n    return exists;\n  }\n\n  getDef(typeName: string): IElementDef {\n    return _.find(this.formHandler, {type: typeName});\n  }\n\n  static addHandler(typeName: string, klass: Function) {\n    let def = this.$().getOrCreateDef(typeName);\n    def.handler = klass;\n    return def;\n  }\n\n\n  static addComponent(typeName: string, klass: Function) {\n    let def = this.$().getOrCreateDef(typeName);\n    def.component = klass;\n    return def;\n  }\n\n  static createHandler(typeName: string) {\n    let handler = this.$().getOrCreateDef(typeName);\n    if (!handler || !handler.handler) {\n      throw new NoFormHandlerDefinedForTypeError(typeName);\n    }\n    let obj = Reflect.construct(handler.handler, []);\n    obj.type = typeName;\n    return obj;\n  }\n\n  static createComponent(typeName: string) {\n    let handler = this.$().getOrCreateDef(typeName);\n    if (!handler || !handler.component) {\n      throw new NoFormHandlerDefinedForTypeError(typeName);\n    }\n    let obj = Reflect.construct(handler.component, []);\n    obj.type = typeName;\n    return obj;\n  }\n\n}\n\n","import {ContentComponentRegistry} from '../ContentComponentRegistry';\n\n\nexport function ViewContent(typeName: string) {\n  return function (object: Function) {\n    ContentComponentRegistry.addHandler(typeName, object);\n  };\n}\n","\nimport {FormObject} from '../FormObject';\n\nimport {ViewContent} from '../../xsview/decorators/ViewContent';\n\n@ViewContent('tabs')\nexport class Tabs extends FormObject {\n\n}\n","\nimport {FormObject} from '../FormObject';\nimport {ViewContent} from '../../xsview/decorators/ViewContent';\n\n@ViewContent('tab')\nexport class Tab extends FormObject {\n\n}\n","import {FormObject, isFormObject} from '../FormObject';\nimport {IResolver} from '../IResolver';\nimport {Form} from './Form';\n\nimport * as _ from '../../../libs/LoDash';\nimport {ViewContent} from '../../xsview/decorators/ViewContent';\n\n@ViewContent('ref')\nexport class Ref extends FormObject implements IResolver {\n\n  use: string;\n\n  postProcess() {\n    this.getForm()['resolver'].push(this);\n  }\n\n  resolve(form: Form) {\n    let elem = form.get(this.use);\n    if(isFormObject(elem)){\n      let e = _.clone(elem);\n      this.replace(e);\n\n      // copy properties\n      this.getUsedKeys().forEach(k => {\n        e.handle(k, this[k]);\n      });\n\n    }\n\n  }\n}\n\n\n\n\n","\nimport {FormObject} from '../FormObject';\nimport {ViewContent} from '../../xsview/decorators/ViewContent';\n\n@ViewContent('input')\nexport class Input extends FormObject {\n\n  variant: string = 'text';\n\n\n  handleVariant(value: string) {\n    this.variant = value;\n  }\n\n}\n","import * as _ from '../../../libs/LoDash';\nimport {IResolver} from '../IResolver';\nimport {FormObject} from '../FormObject';\nimport {ResolveDataValue} from '../ResolveDataValue';\nimport {Ref} from './Ref';\n\nimport {ViewContent} from '../../xsview/decorators/ViewContent';\n\n\n@ViewContent('form')\nexport class Form extends FormObject {\n\n  dataContainer: any;\n\n  resolver: IResolver[] = [];\n\n  combine(otherForm: Form) {\n    let resolverCache: IResolver[] = [];\n\n    while (this.resolver.length > 0) {\n      let resolver = this.resolver.shift();\n      if (resolver instanceof ResolveDataValue) {\n        resolver.resolve(otherForm);\n      } else {\n        resolverCache.push(resolver);\n      }\n    }\n\n    while (resolverCache.length > 0) {\n\n      let resolver = resolverCache.shift();\n      if (resolver instanceof Ref) {\n        resolver.resolve(otherForm);\n      }\n    }\n\n    return this;\n  }\n\n  get(path: string) {\n    let _path = path.split('.');\n    let tmpElem: FormObject = this;\n    let element = null;\n    while (_path.length > 0) {\n      let _p = _path.shift();\n      let ret = _.find(<FormObject[]>tmpElem.getChildren(), {name: _p});\n      //if(isFormObject(ret)){\n      tmpElem = ret;\n      if (!tmpElem) {\n        break;\n      } else {\n        element = tmpElem;\n      }\n      //}\n    }\n    return _path.length == 0 && element ? element : null;\n\n  }\n\n\n}\n","import {Input} from './Input';\nimport {ViewContent} from '../../xsview/decorators/ViewContent';\n\n@ViewContent('checkbox')\nexport class Checkbox extends Input {\n\n\n}\n","\nimport {Input} from './Input';\nimport {ViewContent} from '../../xsview/decorators/ViewContent';\n\n@ViewContent('radio')\nexport class Radio extends Input {\n\n\n}\n","import {FormObject} from '../FormObject';\nimport {ViewContent} from '../../xsview/decorators/ViewContent';\n\n@ViewContent('select')\nexport class Select extends FormObject {\n\n  enum: any;\n\n}\n","import {FormObject} from '../FormObject';\nimport {ViewContent} from '../../xsview/decorators/ViewContent';\n\n@ViewContent('grid')\nexport class Grid extends FormObject {\n\n\n\n}\n","export class NoFormTypeDefinedError extends Error {\n}\n","import {NotYetImplementedError} from 'typexs-base/libs/exceptions/NotYetImplementedError';\nimport {FormObject} from './FormObject';\nimport {Form} from './elements';\n\nimport {ResolveDataValue} from './ResolveDataValue';\nimport {EntityDef} from 'typexs-schema/libs/EntityDef';\nimport {PropertyDef} from 'typexs-schema/libs/PropertyDef';\nimport {SchemaDef} from 'typexs-schema/libs/SchemaDef';\nimport {Registry} from 'typexs-schema/libs/Registry';\nimport * as _ from '../../libs/LoDash';\nimport {NoFormTypeDefinedError} from '../../libs/exceptions/NoFormTypeDefinedError';\nimport {ContentComponentRegistry} from '../xsview/ContentComponentRegistry';\n\n\nexport class FormBuilder {\n\n  private data: any;\n\n  private form: FormObject;\n\n  private schema: SchemaDef;\n\n  buildFromJSON(data: any): Form {\n    this.data = data;\n    this.schema = Registry.getSchema('default');\n    return <Form>this._buildForm(data);\n  }\n\n  buildFromEntity(entity: EntityDef): Form {\n    this.data = entity;\n    return <Form>this._buildFormObject(entity);\n  }\n\n\n  private _buildFormObject(entity: EntityDef | PropertyDef, parent: FormObject = null) {\n\n    let formObject: FormObject = null;\n\n    if (!this.form) {\n      this.schema = Registry.getSchema(entity.schemaName);\n      this.form = formObject = ContentComponentRegistry.createHandler('form');\n      formObject.handle('name', entity.id());\n      formObject.handle('binding', entity);\n    } else if (entity instanceof PropertyDef) {\n      // TODO support also other types\n      let property = entity;\n      let formType = <string>property.getOptions('form') || 'text';\n      let methodName = 'for' + _.capitalize(formType);\n      if (this[methodName]) {\n        formObject = this[methodName](formType, property);\n      } else {\n        formObject = this.forDefault(formType, property);\n      }\n    } else if (entity instanceof EntityDef) {\n\n    }\n\n    if (formObject != null) {\n      formObject.setParent(parent);\n    } else {\n      // if formObject no created but parent is passed then use it as formobject further (grid <- add furter elements)\n      formObject = parent;\n    }\n\n\n    if (entity instanceof EntityDef) {\n      let properties = entity.getPropertyDefs();\n\n      for (let property of properties) {\n        let childObject = this._buildFormObject(property, formObject);\n        formObject.insert(childObject);\n      }\n    } else if (entity instanceof PropertyDef) {\n      // TODO for properties which points to Entity / Entities\n      //property.getEntityDef\n      //formObject;\n      let property = <PropertyDef>entity;\n      if (property.isReference()) {\n        if (property.isEntityReference()) {\n          let entity = property.targetRef.getEntity();\n          let childObject = this._buildFormObject(entity, formObject);\n          formObject.insert(childObject);\n        } else {\n          let properties = this.schema.getPropertiesFor(property.targetRef.getClass());\n          for (let property of properties) {\n            let childObject = this._buildFormObject(property, formObject);\n            formObject.insert(childObject);\n          }\n        }\n      }\n    }\n\n    formObject.postProcess();\n    return formObject;\n\n  }\n\n  private forDefault(formType: string, property: PropertyDef) {\n    let formObject = ContentComponentRegistry.createHandler(formType);\n    if (formObject) {\n      formObject.handle('variant', formType);\n      this._applyValues(formObject, property);\n      return formObject;\n    }\n    throw new NoFormTypeDefinedError(formType);\n  }\n\n  private forText(formType: string, property: PropertyDef) {\n    return this._forInput(formType, property);\n  }\n\n  private forPassword(formType: string, property: PropertyDef) {\n    return this._forInput(formType, property);\n  }\n\n  private forEmail(formType: string, property: PropertyDef) {\n    return this._forInput(formType, property);\n  }\n\n\n  private _forInput(formType: string, property: PropertyDef) {\n    let formObject = ContentComponentRegistry.createHandler('input');\n    formObject.handle('variant', formType);\n    this._applyValues(formObject, property);\n    return formObject;\n  }\n\n  private _applyValues(formObject: FormObject, property: PropertyDef) {\n    formObject.handle('name', property.name);\n    formObject.handle('id', property.id());\n    formObject.handle('label', property.label ? property.label : _.capitalize(property.name));\n    formObject.handle('binding', property);\n\n    let options = property.getOptions();\n    if (options) {\n      Object.keys(options).forEach(opt => {\n        if (/^(source|target|property)/.test(opt)) return;\n        let value = options[opt];\n        formObject.handle(opt, value);\n      });\n    }\n\n  }\n\n\n  private _buildForm(data: any, parent: FormObject = null) {\n    let keys = _.remove(Object.keys(data), (e: string) => ['children', 'type'].indexOf(e) === -1);\n\n    let formObject: FormObject = null;\n    if (data.type) {\n      // lookup handler\n      formObject = ContentComponentRegistry.createHandler(data.type);\n    } else {\n      throw new NoFormTypeDefinedError();\n    }\n\n    if (!this.form) {\n      this.form = formObject;\n    }\n\n    formObject.setParent(parent);\n\n    for (let key of keys) {\n      let value = data[key];\n      if (_.isString(value)) {\n        if (/^\\$/.test(value)) {\n          value = new ResolveDataValue(value, formObject, key);\n        }\n      }\n      formObject.handle(key, value);\n    }\n\n\n    if (data.children) {\n      let value = data.children;\n      if (_.isArray(value)) {\n        for (let entry of value) {\n          let childObject = this._buildForm(entry, formObject);\n          formObject.insert(childObject);\n        }\n      } else {\n        throw new NotYetImplementedError();\n      }\n    }\n\n    formObject.postProcess();\n    return formObject;\n\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {Registry} from 'typexs-schema/libs/Registry';\nimport {Form} from '../../libs/xsform/elements';\nimport {FormBuilder} from '../../libs/xsform/FormBuilder';\n\n\n@Injectable()\nexport class FormService {\n\n  cache: any = {};\n\n  get(name: string, instance: any): Form {\n    // TODO lookup for form modifications\n    let entityDef = Registry.getEntityDefFor(instance);\n    let builder2 = new FormBuilder();\n    return builder2.buildFromEntity(entityDef);\n  }\n\n}\n","import {ContentComponentRegistry} from '../ContentComponentRegistry';\n\n\nexport function ViewComponent(typeName: string) {\n  return function (object: Function) {\n    ContentComponentRegistry.addComponent(typeName, object);\n  };\n}\n","import * as _ from '../../libs/LoDash';\nimport {ComponentFactoryResolver, Inject, Injector, ViewChild, ViewContainerRef} from '@angular/core';\nimport {Context} from './Context';\nimport {NoFormTypeDefinedError} from '../../libs/exceptions/NoFormTypeDefinedError';\nimport {TreeObject} from './TreeObject';\nimport {ContentComponentRegistry} from './ContentComponentRegistry';\n\nconst PROP_METADATA = '__prop__metadata__';\n\nexport abstract class AbstractComponent<T extends TreeObject> {\n\n  context: Context;\n\n  elem: T;\n\n  @ViewChild('content', {read: ViewContainerRef}) vc: ViewContainerRef;\n\n\n  constructor(@Inject(Injector) public injector: Injector,\n              @Inject(ComponentFactoryResolver) public r: ComponentFactoryResolver) {\n    this.construct();\n  }\n\n  construct() {\n  }\n\n  protected setElem(elem: T) {\n    this.elem = elem;\n  }\n\n\n  buildSingle(content: T): AbstractComponent<T> {\n\n\n    const handle = ContentComponentRegistry.$().getOrCreateDef(content.type);\n    if (handle && handle.component) {\n\n\n      if (this.vc) {\n\n        const factory = this.r.resolveComponentFactory(<any>handle.component);\n        const compRef = this.vc.createComponent(factory);\n        const instance = <AbstractComponent<T>>compRef.instance;\n\n        let metadata: { [k: string]: any } = null;\n        if (instance.constructor.hasOwnProperty(PROP_METADATA)) {\n          metadata = instance.constructor[PROP_METADATA];\n        }\n\n        instance.setElem(content);\n\n        if (instance.build) {\n          let refs = instance.build(content);\n\n          if (metadata) {\n            Object.keys(metadata).forEach(key => {\n              let v = metadata[key];\n              if (!_.isEmpty(v)) {\n\n                if (_.isArray(v) && v.length === 1) {\n                  let propDecorator = _.first(v);\n                  if (_.isFunction(propDecorator.selector)) {\n                    if (propDecorator.first) {\n                      // simple ViewChild\n                      instance[key] = _.find(refs, ref => ref.constructor == propDecorator.selector);\n                      instance[key + '2'] = _.find(refs, ref => ref.constructor == propDecorator.selector);\n                    } else {\n                      // simple ViewChildren\n                      instance[key] = _.filter(refs, ref => ref.constructor == propDecorator.selector);\n                      instance[key + '2'] = _.filter(refs, ref => ref.constructor == propDecorator.selector);\n                    }\n                  }\n                } else {\n                  console.error('can\\'t resolve metadata', instance.constructor, key, v);\n                }\n              }\n            });\n          }\n        }\n        return instance;\n      } else {\n        console.error('No view content setted');\n      }\n    } else {\n      throw new NoFormTypeDefinedError(content.type);\n    }\n    return null;\n\n  }\n\n\n  build(content: T): AbstractComponent<T>[] {\n    let refs: AbstractComponent<T>[] = [];\n    content.getChildren().forEach(contentObject => {\n      let ref = this.buildSingle(<T>contentObject);\n      refs.push(ref);\n    });\n    return refs;\n  }\n\n}\n","\nimport * as _ from '../../libs/LoDash';\nexport type ALIGNMENT = 'vertical' | 'horizontal'\n\nexport type LABEL_DISPLAY = 'top' | 'inline' | 'none'\n\nexport class Context {\n\n  name: string;\n\n  idx: number = -1;\n\n  parent: Context;\n\n  labelDisplay: LABEL_DISPLAY;\n\n  // alignment:\n\n  child(_name: string = null, idx: number = -1) {\n    let name = new Context();\n    name.parent = this;\n    name.name = _name;\n    name.idx = idx;\n    return name;\n  }\n\n\n  path(): string {\n    let arr: string[] = [];\n    if (this.parent) {\n      arr = this.parent.path().split('.');\n    }\n\n    if (this.idx > -1) {\n      arr[arr.length - 1] = arr[arr.length - 1] + '[' + this.idx + ']';\n      // arr.push(this.name + '[' + this.idx + ']');\n    } else {\n      arr.push(this.name);\n    }\n    //  console.log(arr);\n    return _.filter(arr, (x: string) => !_.isEmpty(x)).join('.');\n  }\n\n\n  get(key: string, _default: any = null): any {\n    if (_.has(this, key)) {\n      return _.get(this, key, _default);\n    } else if (this.parent) {\n      return this.parent.get(key);\n    }\n    return _default;\n  }\n\n}\n","import {DataContainer} from 'typexs-schema/libs/DataContainer';\n\nimport * as _ from '../../libs/LoDash';\nimport {PropertyDef} from 'typexs-schema/libs/PropertyDef';\n\nimport {NoFormTypeDefinedError} from '../../libs/exceptions/NoFormTypeDefinedError';\nimport {AbstractComponent} from '../xsview/AbstractComponent';\nimport {FormObject, isFormObject} from './FormObject';\nimport {ContentComponentRegistry} from '../xsview/ContentComponentRegistry';\nimport {Context} from '../xsview/Context';\n\n\nexport abstract class AbstractFormComponent<T extends FormObject> extends AbstractComponent<T> {\n\n  static _inc: number = 0;\n\n\n  data: DataContainer<any>;\n\n  inc: number = 0;\n\n\n\n  construct(){\n    this.inc = AbstractFormComponent._inc++;\n  }\n\n  get id() {\n    return this.elem.id;\n  }\n\n\n  get name() {\n    return this.elem.name;\n  }\n\n\n  get label() {\n    return this.elem.label;\n  }\n\n\n  get labelDisplay() {\n    return this.context.get('labelDisplay', 'top');\n  }\n\n\n  get help() {\n    return this.elem.help;\n  }\n\n\n  get isReadOnly() {\n    return this.elem.readonly;\n  }\n\n\n  get isValid() {\n    return this.data.checked(this.name) && this.data.valid(this.name);\n  }\n\n\n  protected setFormObject(elem: T) {\n    this.setElem(elem);\n  }\n\n\n  setData(elem: T, parent: Context, idx: number = -1) {\n    this.setFormObject(elem);\n    if (parent) {\n      this.context = parent.child(elem.name, idx);\n    } else {\n      this.context = new Context();\n      if (elem.getBinding() instanceof PropertyDef) {\n        this.context.name = elem.name;\n        this.context.idx = idx;\n      }\n    }\n  }\n\n\n  get value() {\n    let path = this.context.path();\n    return _.get(this.data.instance, path, null);\n  }\n\n\n  set value(v: any) {\n    let path = this.context.path();\n    _.set(this.data.instance, path, v);\n  }\n\n\n  build(form: FormObject) : AbstractComponent<T>[] {\n    let comp:AbstractComponent<T>[] = []\n    form.getChildren().forEach(formObject => {\n      if (isFormObject(formObject)) {\n\n        let handle = ContentComponentRegistry.$().getOrCreateDef(formObject.type);\n        if (handle && handle.component) {\n          if (this.vc) {\n            let factory = this.r.resolveComponentFactory(<any>handle.component);\n            let ref = this.vc.createComponent(factory);\n            let instance = <AbstractFormComponent<any>>ref.instance;\n            instance.data = this.data;\n            instance.setData(formObject, this.context);\n            instance.build(formObject);\n            comp.push(instance);\n          } else {\n            console.error('No view content setted');\n          }\n        } else {\n          throw new NoFormTypeDefinedError(formObject.type);\n        }\n      }\n    });\n    return comp;\n  }\n\n}\n","import {ChangeDetectorRef, Component, ComponentFactoryResolver, EventEmitter, Inject, Injector, Input, OnInit, Output} from '@angular/core';\nimport {DataContainer} from 'typexs-schema/libs/DataContainer';\nimport {FormService} from './form.service';\nimport {ViewComponent} from '../../libs/xsview/decorators/ViewComponent';\nimport {AbstractFormComponent} from '../../libs/xsform/AbstractFormComponent';\nimport {Form} from '../../libs/xsform/elements';\n\n@ViewComponent('form')\n@Component({\n  selector: 'xform',\n  templateUrl: './form.component.html',\n  //host: {'(submit)': 'onSubmit($event)', '(reset)': 'onReset()'},\n  //outputs: ['ngSubmit'],\n})\nexport class FormComponent extends AbstractFormComponent<Form> implements OnInit {\n\n  @Output()\n  ngSubmit = new EventEmitter();\n\n  @Input()\n  formName: string;\n\n  @Input()\n  instance: any;\n\n\n  constructor(@Inject(FormService) private formService: FormService,\n              @Inject(Injector) public injector: Injector,\n              @Inject(ComponentFactoryResolver) public r: ComponentFactoryResolver) {\n    super(injector, r);\n  }\n\n\n  ngOnInit() {\n\n    // TODO instance must be present\n    this.data = new DataContainer(this.instance);\n    this.elem = this.formService.get(this.formName, this.instance);\n\n    // TODO restructure form\n    this.build(this.elem);\n  }\n\n\n  async onSubmit($event: Event): Promise<boolean> {\n    await this.data.validate();\n    this.ngSubmit.emit({event:$event, data:this.data});\n    return false;\n  }\n\n\n}\n\n","import {Component} from '@angular/core';\nimport {ViewComponent} from '../../libs/xsview/decorators/ViewComponent';\nimport {AbstractFormComponent} from '../../libs/xsform/AbstractFormComponent';\nimport {Input} from '../../libs/xsform/elements';\n\n\n\n@ViewComponent('input')\n@Component({\n  selector: 'xinput',\n  templateUrl: './input.component.html',\n})\nexport class InputComponent extends AbstractFormComponent<Input>/* implements OnInit, OnChanges */ {\n\n  get type(){\n    return this.elem.variant;\n  }\n\n\n\n\n}\n","import {Component, Input} from '@angular/core';\nimport {ViewComponent} from '../../libs/xsview/decorators/ViewComponent';\nimport {AbstractFormComponent} from '../../libs/xsform/AbstractFormComponent';\nimport {Checkbox} from '../../libs/xsform/elements';\n\n\n@ViewComponent('checkbox')\n@Component({\n  selector: 'xcheckbox',\n  templateUrl: './checkbox.component.html',\n})\nexport class CheckboxComponent extends AbstractFormComponent<Checkbox> {\n\n  get type(){\n    return this.elem.variant;\n  }\n\n\n  get isChecked(){\n    return this.data.instance[this.name];\n  }\n\n  set isChecked(value:boolean){\n    if(value){\n      this.data.instance[this.name] = true;\n    }else{\n      this.data.instance[this.name] = false;\n    }\n  }\n}\n","import {Component, Input} from '@angular/core';\nimport {AbstractFormComponent} from '../../libs/xsform/AbstractFormComponent';\nimport {Radio} from '../../libs/xsform/elements/Radio';\nimport {ViewComponent} from '../../libs/xsview/decorators/ViewComponent';\n\n\n@ViewComponent('radio')\n@Component({\n  selector: 'xradio',\n  templateUrl: './radio.component.html',\n})\nexport class RadioComponent extends AbstractFormComponent<Radio> {\n\n  on: string = 'Yes';\n\n  off: string = 'No';\n\n  get type() {\n    return this.elem.variant;\n  }\n\n  get isChecked() {\n    return this.data.instance[this.name];\n  }\n\n  set isChecked(value: boolean) {\n    if (value) {\n      this.data.instance[this.name] = true;\n    } else {\n      this.data.instance[this.name] = false;\n    }\n  }\n}\n","import {Component, OnInit} from '@angular/core';\n\nimport * as _ from '../../libs/LoDash';\nimport {Observable} from 'rxjs/Observable';\nimport {AbstractFormComponent} from '../../libs/xsform/AbstractFormComponent';\nimport {Select} from '../../libs/xsform/elements';\nimport {ViewComponent} from '../../libs/xsview/decorators/ViewComponent';\n\nexport class Option {\n  value: string = '';\n  label: string = '---';\n  default: boolean;\n}\n\n@ViewComponent('select')\n@Component({\n  selector: 'xselect',\n  templateUrl: './select.component.html',\n})\nexport class SelectComponent extends AbstractFormComponent<Select> implements OnInit {\n\n  cachedOptions: Option[] = [];\n\n\n  get supportsMultiple(): boolean {\n    return this.elem.getBinding().isCollection();\n  }\n\n  ngOnInit() {\n    this.cachedOptions = [];\n    this.loadOptions();\n  }\n\n  loadOptions() {\n    let enums = this.retrieveEnum();\n\n    if (enums) {\n      if (enums instanceof Observable) {\n        enums.subscribe(e => {\n          let o = new Option();\n          if (_.isString(e)) {\n            o.label = o.value = e;\n          } else if (_.has(e, 'label') || _.has(e, 'value')) {\n            o.label = _.get(e, 'label', _.get(e, 'value'));\n            o.value = _.get(e, 'value', _.get(e, 'label'));\n          } else {\n            throw new Error('not found');\n          }\n          this.cachedOptions.push(o);\n        });\n      } else {\n        enums.forEach(e => {\n          let o = new Option();\n          if (_.isString(e)) {\n            o.label = o.value = e;\n          } else if (_.has(e, 'label') || _.has(e, 'value')) {\n            o.label = _.get(e, 'label', _.get(e, 'value'));\n            o.value = _.get(e, 'value', _.get(e, 'label'));\n          } else {\n            throw new Error('not found');\n          }\n          this.cachedOptions.push(o);\n        });\n      }\n    }\n  }\n\n\n  retrieveEnum(): any[] {\n    if (_.isArray(this.elem.enum)) {\n      return this.elem.enum;\n    } else if (_.isFunction(this.elem.enum)) {\n      return this.injector.get(this.elem.enum).get(this.name);\n    } else if (_.isString(this.elem.enum)) {\n      // check if an entry with the propertyname exists\n      let lookupPath: string | string[] = [];\n      if (this.context.parent) {\n        lookupPath.push(this.context.parent.path());\n      }\n      lookupPath.push(this.elem.enum)\n      lookupPath = (<string[]>lookupPath).join('.');\n\n      if (_.has(this.data.instance, lookupPath)) {\n        // TODO observe if property is changed, if it does then reset enum\n        return _.get(this.data.instance, lookupPath, []);\n      } else {\n        throw new Error('not found enum reference');\n      }\n    }\n    return [];\n  }\n}\n","import {Component, HostBinding} from '@angular/core';\nimport {GridComponent} from './grid.component';\nimport {AbstractFormComponent} from '../../libs/xsform/AbstractFormComponent';\n\n\n@Component({\n  selector: 'xgridcell',\n  templateUrl: './grid-cell.component.html',\n})\nexport class GridCellComponent extends AbstractFormComponent<any> {\n\n  private grid: GridComponent;\n\n  @HostBinding('class')\n\tget hostClasses(): string {\n\t\treturn [\n\t\t  'col'\n\t\t].join(' ');\n\t}\n\n  setGridComponent(grid: GridComponent) {\n    this.grid = grid;\n  }\n\n\n\n\n}\n","import {Component, HostBinding} from '@angular/core';\nimport {GridComponent} from './grid.component';\nimport {GridCellComponent} from './grid-cell.component';\nimport {NoFormTypeDefinedError} from '../../libs/exceptions/NoFormTypeDefinedError';\nimport {AbstractFormComponent} from '../../libs/xsform/AbstractFormComponent';\nimport {FormObject, isFormObject} from '../../libs/xsform/FormObject';\nimport {AbstractComponent} from '../../libs/xsview/AbstractComponent';\nimport {ContentComponentRegistry} from '../../libs/xsview/ContentComponentRegistry';\n\n\n@Component({\n  selector: 'xgridrow',\n  templateUrl: './grid-row.component.html',\n})\nexport class GridRowComponent extends AbstractFormComponent<any> {\n\n  private grid: GridComponent;\n\n  setGridComponent(grid: GridComponent) {\n    this.grid = grid;\n  }\n\n  @HostBinding('class')\n  get hostClasses(): string {\n    return [\n      'form-row'\n    ].join(' ');\n  }\n\n\n  get idx() {\n    return this.context.idx;\n  }\n\n  removeRow() {\n    this.grid.removeRow(this.context.idx);\n  }\n\n  build(form: FormObject):AbstractComponent<any>[] {\n    let comp:AbstractComponent<any>[] = []\n    form.getChildren().forEach(formObject => {\n\n      if (isFormObject(formObject)) {\n        let handle = ContentComponentRegistry.$().getOrCreateDef(formObject.type);\n        if (handle && handle.component) {\n\n          let cGridCellFactory = this.r.resolveComponentFactory(GridCellComponent);\n          let cGridCell = this.vc.createComponent(cGridCellFactory);\n          cGridCell.instance.data = this.data;\n          cGridCell.instance.setGridComponent(this.grid);\n          cGridCell.instance.setData(formObject, this.context);\n\n          if (cGridCell.instance.vc) {\n            let factory = this.r.resolveComponentFactory(<any>handle.component);\n            let ref = cGridCell.instance.vc.createComponent(factory);\n            let instance = <AbstractFormComponent<any>>ref.instance;\n            instance.data = this.data;\n            instance.setData(formObject, this.context);\n            instance.build(formObject);\n            comp.push(instance);\n          } else {\n            console.error('No view content setted');\n          }\n        } else {\n          throw new NoFormTypeDefinedError(formObject.type);\n        }\n      }\n    });\n    return comp;\n  }\n\n}\n","import {Component, ComponentRef, OnInit} from '@angular/core';\nimport {GridRowComponent} from './grid-row.component';\n\nimport * as _ from '../../libs/LoDash';\nimport {ViewComponent} from '../../libs/xsview/decorators/ViewComponent';\nimport {AbstractFormComponent} from '../../libs/xsform/AbstractFormComponent';\nimport {Grid} from '../../libs/xsform/elements';\nimport {AbstractComponent} from '../../libs/xsview/AbstractComponent';\nimport {FormObject, isFormObject} from '../../libs/xsform/FormObject';\n@ViewComponent('grid')\n@Component({\n  selector: 'xgrid',\n  templateUrl: './grid.component.html',\n})\nexport class GridComponent extends AbstractFormComponent<Grid> implements OnInit {\n\n\n  entries: ComponentRef<GridRowComponent>[] = [];\n\n  header:string[] = [];\n\n\n  ngOnInit() {\n  }\n\n\n  addRow(index: number = -1) {\n    let factory = this.r.resolveComponentFactory(GridRowComponent);\n    let cGridRow = this.vc.createComponent(factory);\n    cGridRow.instance.data = this.data;\n    cGridRow.instance.setGridComponent(this);\n    cGridRow.instance.setData(this.elem, this.context, this.entries.length);\n    this.entries.push(cGridRow);\n\n    let object = Reflect.construct(this.elem.getBinding().targetRef.getClass(), []);\n    let path = this.context.path();\n    if (this.elem.getBinding().isCollection()) {\n      let arraySetted = _.get(this.data.instance, path, null);\n      if (!arraySetted) {\n        arraySetted = [];\n      }\n      arraySetted[cGridRow.instance.context.idx] = object;\n      _.set(this.data.instance, path, arraySetted);\n    } else {\n      _.set(this.data.instance, path, object);\n    }\n    cGridRow.instance.build(this.elem);\n    return cGridRow.instance;\n  }\n\n\n  removeRow(idx: number) {\n    // TODO check if exists\n    let path = this.context.path();\n\n    let components = this.entries.splice(idx, 1);\n    let component = components.shift();\n\n    this.vc.remove(idx);\n    if (this.elem.getBinding().isCollection()) {\n      let arraySetted = _.get(this.data.instance, path, null);\n      if (!arraySetted) {\n        arraySetted = [];\n      }\n      arraySetted.splice(idx, 1);\n\n      _.set(this.data.instance, path, arraySetted);\n    } else {\n      _.set(this.data.instance, path, null);\n    }\n\n    for (let i = this.entries.length - 1; i >= 0; i--) {\n      this.entries[i].instance.context.idx = i;\n    }\n    component.destroy();\n  }\n\n\n  build(form: FormObject):AbstractComponent<any>[] {\n    this.context.labelDisplay = 'none';\n\n\n    form.getChildren().forEach(obj => {\n      if(isFormObject(obj)){\n        this.header.push(obj.label);\n      }\n    });\n\n\n    let dataEntries = this.elem.getBinding().get(this.data.instance);\n\n    let c = this.addRow();\n    return [c];\n  }\n\n}\n","\n// to integrate the elements\nimport {FORM_ELEMENTS} from '../../libs/xsform/elements';\n\nFORM_ELEMENTS;\n\nimport {FormComponent} from './form.component';\nimport {InputComponent} from './input.component';\nimport {CheckboxComponent} from './checkbox.component';\nimport {RadioComponent} from './radio.component';\nimport {SelectComponent} from './select.component';\nimport {GridComponent} from './grid.component';\nimport {GridRowComponent} from './grid-row.component';\nimport {GridCellComponent} from './grid-cell.component';\n\n\nexport const XFORMCOMPONENT = [\n  FormComponent,\n  InputComponent,\n  CheckboxComponent,\n  RadioComponent,\n  SelectComponent,\n  GridComponent,\n  GridRowComponent,\n  GridCellComponent\n]\n\n","import {NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\nimport {BrowserModule} from '@angular/platform-browser';\nimport {XFORMCOMPONENT} from './xforms.elements';\nimport {FormService} from './form.service';\n\n\n@NgModule({\n  declarations: XFORMCOMPONENT,\n  imports: [\n    FormsModule,\n    BrowserModule\n  ],\n  entryComponents: XFORMCOMPONENT,\n  exports: XFORMCOMPONENT,\n  providers: [\n    FormService\n  ]\n})\nexport class xFormsModule {\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {TreeObject} from '../../libs/xsview/TreeObject';\nimport {AbstractComponent} from '../../libs/xsview/AbstractComponent';\n\n\n\n\n@Component({\n  selector: 'view-builder',\n  templateUrl: './view-builder.component.html',\n  // host: {'(submit)': 'onSubmit($event)', '(reset)': 'onReset()'},\n  // outputs: ['ngSubmit'],\n})\nexport class ViewBuilderComponent<T extends TreeObject> extends AbstractComponent<T> implements OnInit {\n\n  private _build:boolean = false;\n\n\n  _instance: any;\n\n  @Input() set instance(value: any) {\n    this._instance = value;\n    this._build = false;\n    this.__build();\n  }\n\n  get instance(): any {\n    return this._instance;\n  }\n\n  ngOnInit() {\n    this.__build();\n  }\n\n  private __build(){\n    if(!this._build){\n      this.vc.clear();\n      this.buildSingle(this._instance);\n      this._build = true;\n    }\n  }\n}\n\n","import {NgModule} from '@angular/core';\nimport {BrowserModule} from '@angular/platform-browser';\nimport {ViewBuilderComponent} from './view-builder.component';\n\n\n@NgModule({\n  declarations: [ViewBuilderComponent],\n  imports: [\n    BrowserModule\n  ],\n  entryComponents: [],\n  exports: [ViewBuilderComponent],\n  providers: []\n})\nexport class xViewsModule {\n}\n"],"names":["_","router","tslib_1.__values","Component","Router","NgModule","BrowserModule","RouterModule","tslib_1.__extends","PropertyDef","_.filter","_.capitalize","_.find","_.clone","Registry","EntityDef","_.remove","_.isString","_.isArray","NotYetImplementedError","Injectable","_.isEmpty","_.first","_.isFunction","Injector","Inject","ComponentFactoryResolver","ViewChild","ViewContainerRef","_.has","_.get","_.set","EventEmitter","DataContainer","Output","Input","Observable","HostBinding","FormsModule"],"mappings":"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"}
